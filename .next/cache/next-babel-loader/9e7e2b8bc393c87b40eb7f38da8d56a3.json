{"ast":null,"code":"import { Api } from \"./api\";\nimport { getGeneralApiProblem } from \"./api/api-problem\";\nexport class AuthApi extends Api {\n  async login(email, password) {\n    const response = await this.apisauce.post(\"/api/v1/auth/login\", {\n      email: email,\n      password: password\n    });\n\n    if (!response.ok) {\n      const problem = getGeneralApiProblem(response);\n      if (problem) return problem;\n    }\n\n    try {\n      const data = response.data;\n      return {\n        kind: \"ok\",\n        token: data.auth_token,\n        user: data.user\n      };\n    } catch {\n      return {\n        kind: \"bad-data\"\n      };\n    }\n  }\n\n  async fetchStatus(token) {\n    this.apisauce.setHeader(\"Authorization\", `Bearer ${token}`);\n    const response = await this.apisauce.get(\"/api/v1/auth/status\");\n\n    if (!response.ok) {\n      const problem = getGeneralApiProblem(response);\n      if (problem) return problem;\n    }\n\n    try {\n      const data = response.data;\n      return {\n        kind: \"ok\",\n        user: data.user\n      };\n    } catch {\n      return {\n        kind: \"bad-data\"\n      };\n    }\n  }\n\n  async checkToken(token) {\n    this.apisauce.setHeader(\"Authorization\", `Bearer ${token}`);\n    const response = await this.apisauce.get(\"/api/v1/auth/ping\");\n\n    if (!response.ok) {\n      const problem = getGeneralApiProblem(response);\n      if (problem) return problem;\n    }\n\n    try {\n      const data = response.data;\n      return {\n        kind: \"ok\",\n        message: data.message\n      };\n    } catch {\n      return {\n        kind: \"bad-data\"\n      };\n    }\n  }\n\n}","map":null,"metadata":{},"sourceType":"module"}